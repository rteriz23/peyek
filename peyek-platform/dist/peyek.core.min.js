!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PeyekCore={})}(this,function(e){"use strict";function t(e,t={},n=[]){const o=document.createElement(e);for(const[e,n]of Object.entries(t))if(e.startsWith("on")&&"function"==typeof n){const t=e.substring(2).toLowerCase();o.addEventListener(t,n)}else"className"===e?o.className=n:"style"===e&&"object"==typeof n?Object.assign(o.style,n):o.setAttribute(e,n);return n.forEach(e=>{"string"==typeof e?o.appendChild(document.createTextNode(e)):e instanceof HTMLElement&&o.appendChild(e)}),o}function n(){return"peyek_"+Math.random().toString(36).substr(2,9)}var o=Object.freeze({__proto__:null,createElement:t,generateUniqueId:n});class s{static initStyles(){if(!document.getElementById("peyek-modal-styles")){const e=document.createElement("style");e.id="peyek-modal-styles",e.textContent="\n  .peyek-modal-overlay {\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 9999;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    backdrop-filter: blur(2px);\n  }\n  .peyek-modal-overlay.peyek-modal-show {\n    opacity: 1;\n  }\n  .peyek-modal-content {\n    background: #fff;\n    border-radius: 8px;\n    padding: 24px;\n    max-width: 500px;\n    width: 90%;\n    box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n    transform: scale(0.95) translateY(20px);\n    transition: transform 0.3s ease;\n  }\n  .peyek-modal-overlay.peyek-modal-show .peyek-modal-content {\n    transform: scale(1) translateY(0);\n  }\n  .peyek-modal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 12px;\n    margin-bottom: 16px;\n  }\n  .peyek-modal-title {\n    margin: 0;\n    font-size: 1.25rem;\n    color: #333;\n    font-family: system-ui, -apple-system, sans-serif;\n    font-weight: 600;\n  }\n  .peyek-modal-close {\n    background: none;\n    border: none;\n    font-size: 1.5rem;\n    cursor: pointer;\n    color: #999;\n    line-height: 1;\n  }\n  .peyek-modal-close:hover {\n    color: #333;\n  }\n  .peyek-modal-body {\n    font-family: system-ui, -apple-system, sans-serif;\n    color: #555;\n    line-height: 1.6;\n  }\n",document.head.appendChild(e)}}static show(e={}){this.initStyles();const{title:o="Alert",content:s="",closeOnClickOutside:i=!0}=e,a=n(),r=t("div",{id:a,className:"peyek-modal-overlay"}),l=t("div",{className:"peyek-modal-content"}),c=t("div",{className:"peyek-modal-header"},[t("h2",{className:"peyek-modal-title"},[o]),t("button",{className:"peyek-modal-close",innerHTML:"&times;",onClick:()=>this.close(a)})]),d=t("div",{className:"peyek-modal-body"});return"string"==typeof s?d.innerHTML=s:d.appendChild(s),l.appendChild(c),l.appendChild(d),r.appendChild(l),i&&r.addEventListener("click",e=>{e.target===r&&this.close(a)}),document.body.appendChild(r),requestAnimationFrame(()=>{r.classList.add("peyek-modal-show")}),a}static close(e){const t=document.getElementById(e);t&&(t.classList.remove("peyek-modal-show"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300))}}class i{static defaults={headers:{"Content-Type":"application/json",Accept:"application/json"}};static setCsrfToken(e,t="X-CSRF-TOKEN"){this.defaults.headers[t]=e}static async verifyLicense(e){return fetch("http://localhost:3000/api/license/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:e,origin:window.location.origin})}).then(e=>e.json())}static async get(e,t={}){return this.request(e,{...t,method:"GET"})}static async post(e,t={},n={}){return this.request(e,{...n,method:"POST",body:JSON.stringify(t)})}static async request(e,t={}){try{const n={...t,headers:{...this.defaults.headers,...t.headers||{}}},o=await fetch(e,n),s=o.headers.get("content-type")?.includes("application/json"),i=s?await o.json():await o.text();if(!o.ok)throw{status:o.status,data:i};return i}catch(e){throw console.error("[P.E.Y.E.K API Error]",e),e}}}const a=new class{constructor(){this.Modal=s,this.API=i,this.Utils=o,this.version="1.0.0",this.licenseKey=null,this.isPremium=!1}async init(e={}){console.log(`[P.E.Y.E.K] Core initialized v${this.version}`),e.license&&await this.verifyLicense(e.license),this.autoDetectCsrf()}async verifyLicense(e){console.log("[P.E.Y.E.K] Validating license key...");try{const t=await this.API.verifyLicense(e);t.valid?(this.licenseKey=e,this.isPremium=!0,console.log("%c[P.E.Y.E.K Premium Enabled]","color: #27c93f; font-weight: bold;")):console.warn("[P.E.Y.E.K] Invalid License: "+t.error)}catch(e){console.warn("[P.E.Y.E.K] Could not reach activation server.")}}autoDetectCsrf(){const e=document.querySelector('meta[name="csrf-token"]');e&&(this.API.setCsrfToken(e.getAttribute("content")),console.log("[P.E.Y.E.K] Auto-detected Laravel CSRF token"));const t=document.querySelector('meta[name="csrf-param"]'),n=document.querySelector('meta[name="csrf-token"]');t&&n&&(this.API.setCsrfToken(n.getAttribute("content"),"X-CSRF-Token"),console.log("[P.E.Y.E.K] Auto-detected Yii CSRF token"))}};e.API=i,e.Modal=s,e.Utils=o,e.default=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=peyek.core.min.js.map
