!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).PeyekPDFViewer={})}(this,function(e){"use strict";function n(e,n={},t=[]){const i=document.createElement(e);for(const[e,t]of Object.entries(n))if(e.startsWith("on")&&"function"==typeof t){const n=e.substring(2).toLowerCase();i.addEventListener(n,t)}else"className"===e?i.className=t:"style"===e&&"object"==typeof t?Object.assign(i.style,t):i.setAttribute(e,t);return t.forEach(e=>{"string"==typeof e?i.appendChild(document.createTextNode(e)):e instanceof HTMLElement&&i.appendChild(e)}),i}const t="3.4.120";function i(){return new Promise((e,n)=>{if(window.pdfjsLib)return void e();const i=document.createElement("script");i.src=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${t}/pdf.min.js`,i.onload=()=>{window.pdfjsLib&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${t}/pdf.worker.min.js`),e()},i.onerror=e=>n(new Error("Failed to load pdf.js from CDN")),document.head.appendChild(i)})}e.PDFViewer=class{constructor(e,n={}){if(this.container=document.getElementById(e),!this.container)throw new Error(`Container #${e} not found`);this.url=n.url||null,this.scale=n.scale||1.5,this.pdfDoc=null,this.pageNum=1,this.pageRendering=!1,this.pageNumPending=null,this.initStyles(),this.initHTML()}initStyles(){if(!document.getElementById("peyek-pdf-styles")){const e=document.createElement("style");e.id="peyek-pdf-styles",e.textContent="\n  .peyek-pdf-container {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background: #e9e9e9;\n    padding: 20px;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .peyek-pdf-page {\n    margin-bottom: 20px;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.1);\n    background: #fff;\n  }\n  .peyek-pdf-toolbar {\n    width: 100%;\n    padding: 10px;\n    background: #333;\n    color: white;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 20px;\n    border-radius: 4px;\n    box-sizing: border-box;\n  }\n  .peyek-pdf-toolbar button {\n    background: #555;\n    color: white;\n    border: none;\n    padding: 6px 12px;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  .peyek-pdf-toolbar button:hover {\n    background: #777;\n  }\n",document.head.appendChild(e)}}initHTML(){this.container.innerHTML="";const e=n("div",{className:"peyek-pdf-container"}),t=n("div",{className:"peyek-pdf-toolbar"},[n("div",{},[n("button",{id:"peyek-pdf-prev",onClick:()=>this.onPrevPage()},["Previous"])]),n("div",{},[n("span",{id:"peyek-pdf-page-num"},["1"])," / ",n("span",{id:"peyek-pdf-page-count"},["?"])]),n("div",{},[n("button",{id:"peyek-pdf-next",onClick:()=>this.onNextPage()},["Next"])])]),i=n("canvas",{id:"peyek-pdf-canvas",className:"peyek-pdf-page"});e.appendChild(t),e.appendChild(i),this.container.appendChild(e),this.canvas=i,this.ctx=i.getContext("2d")}async load(e){if(this.url=e||this.url,this.url){await i();try{this.pdfDoc=await window.pdfjsLib.getDocument(this.url).promise,document.getElementById("peyek-pdf-page-count").textContent=this.pdfDoc.numPages,this.renderPage(this.pageNum)}catch(e){console.error("[P.E.Y.E.K] Error loading PDF:",e),this.container.innerHTML='<div style="color:red; padding: 20px;">Failed to load PDF. Check console for details.</div>'}}}async renderPage(e){this.pageRendering=!0;try{const n=await this.pdfDoc.getPage(e),t=n.getViewport({scale:this.scale});this.canvas.height=t.height,this.canvas.width=t.width;const i={canvasContext:this.ctx,viewport:t};await n.render(i).promise,this.pageRendering=!1,null!==this.pageNumPending&&(this.renderPage(this.pageNumPending),this.pageNumPending=null)}catch(e){console.error(e)}document.getElementById("peyek-pdf-page-num").textContent=e}queueRenderPage(e){this.pageRendering?this.pageNumPending=e:this.renderPage(e)}onPrevPage(){this.pageNum<=1||(this.pageNum--,this.queueRenderPage(this.pageNum))}onNextPage(){this.pageNum>=this.pdfDoc.numPages||(this.pageNum++,this.queueRenderPage(this.pageNum))}},e.setupWorker=i});
//# sourceMappingURL=peyek.pdf-viewer.min.js.map
